\RequirePackage{mathtools}
\RequirePackage{pgffor} % foreach loops

\let\temp\phi
\let\phi\varphi
\let\varphi\temp

% https://tex.stackexchange.com/a/124311/63353
\g@addto@macro\bfseries{\boldmath}

\newcommand{\fieldF}{\mathbb{F}}
\newcommand{\fieldK}{\mathbb{K}}
\newcommand{\naturals}{\mathbb{N}}
\newcommand{\mat}[2]{\mathrm{M}_{#1}(#2)}
\newcommand{\matGL}[2]{\mathrm{GL}_{#1}(#2)}

\renewcommand{\implies}{\Rightarrow}
\renewcommand{\iff}{\Leftrightarrow}


\newcommand{\inv}[1]{#1^{-1}}

\newcommand{\cat}[1]{\mathcal{#1}} % Arbitrary category
\newcommand{\scat}[1]{\mathbf{#1}} % Category supposed to be small

\foreach \x in {A,...,Z}{%
    \expandafter\xdef\csname cal\x\endcsname{\noexpand\mathcal{\x}}
    % \expandafter\xdef\csname frak\x\endcsname{\noexpand\mathfrak{\x}}
    % \expandafter\xdef\csname sf\x\endcsname{\noexpand\mathsf{\x}}
    % \expandafter\xdef\csname rand\x\endcsname{\noexpand\rvar{\x}}
    % \expandafter\xdef\csname bb\x\endcsname{\noexpand\mathbb{\x}}
    \expandafter\xdef\csname cat\x\endcsname{\noexpand\cat{\x}}
    % \expandafter\xdef\csname scat\x\endcsname{\noexpand\scat{\x}}
}

\newcommand{\catSet}{\scat{Set}}
\newcommand{\catVect}[1]{#1\text{-}\scat{Vect}}

\newcommand{\Span}{\operatorname{span}} % TODO starred
\newcommand{\gen}[1]{\langle#1\rangle}
\DeclarePairedDelimiterX{\genset}[2]{\langle}{\rangle}{#1\;\delimsize\vert\;#2}


\newcommand{\dirsum}{\oplus}
\newcommand{\bigdirsum}{\bigoplus}
\newcommand{\bigunion}{\bigcup}
\newcommand{\bigintersect}{\bigcap}
\newcommand{\union}{\cup}
\newcommand{\intersect}{\cap}

\DeclarePairedDelimiter{\card}{\lvert}{\rvert}


\newcommand{\coordmap}[1]{\phi_{#1}}
\newcommand{\coordvec}[2]{[#1]_{#2}}
\newcommand{\basischange}[2]{\phi_{#1,#2}}
\newcommand{\mr}[3]{{}_{#1}[#2]_{#3}}
\newcommand{\basischangemat}[2]{\mr{#1}{\square}{#2}}
\newcommand{\lin}{\calL}
\newcommand{\smr}[1]{\calM(#1)} % standard matrix representation

\newcommand{\colvec}[1]{\begin{pmatrix}#1\end{pmatrix}}

\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\chr}{char}
\DeclareMathOperator{\sign}{sgn}
\DeclareMathOperator{\cof}{cof}
\DeclareMathOperator{\adj}{adj}


\newcommand{\defeq}{\coloneqq}
\newcommand{\eqdef}{\eqqcolon}

\newcommand{\trans}[1]{#1^\bot}

\DeclarePairedDelimiterX{\set}[2]{\lbrace}{\rbrace}{#1\;\delimsize\vert\;\mathopen{}#2} % Daleif uses \, on page 66

\newcommand{\ev}{\mathrm{ev}}

\renewcommand{\hom}[1][]{\mathrm{Hom}_{#1}}

\let\oldprod\prod
\renewcommand{\prod}{\times}
\newcommand{\bigprod}{\oldprod}